# c++进阶
主要是关于c++高版本新特性相关知识。

## 1、sring_view和string的区别
参考：https://blog.csdn.net/weixin_48617416/article/details/129719243

string_view和string是C++中的两种不同的字符串类型。

string是C++标准库中的字符串类型，它是一个可变长度的字符序列。string类型提供了许多成员函数和操作符，用于对字符串进行操作和处理。你可以修改string对象的内容，例如添加、删除、替换字符等。

string_view是C++17引入的一个新类型，它是一个不可变的字符序列的非拥有者视图。它提供了对现有字符串的只读访问，但不拥有字符串的内存。string_view本身不分配或释放内存，它只是一个指向字符串的指针和长度的组合。因此，string_view适用于那些不需要修改字符串内容的场景，例如函数参数、返回值或临时的字符串引用。

下面是一些string_view和string之间的区别：

- 可变性：string是可变的，可以修改字符串的内容，而string_view是只读的，不能修改字符串的内容。
- 拥有权：string拥有字符串的内存，它负责分配和释放内存。而string_view不拥有字符串的内存，它只是一个对现有字符串的引用。
- 内存分配：string在创建和修改时可能需要进行内存分配和释放操作，而string_view不需要进行内存分配和释放，它只是一个指向现有字符串的视图。
- 功能和操作：string提供了丰富的成员函数和操作符，用于对字符串进行操作和处理，例如查找、替换、拼接等。而string_view提供了一些基本的成员函数，例如size()、substr()等，但没有修改字符串内容的函数。

总之，string适用于需要修改字符串内容的场景，而string_view适用于只需要对字符串进行只读访问的场景，它可以提高性能和效率，避免不必要的内存分配和拷贝。

## 2、C++11 字面量操作符
https://blog.csdn.net/qq_28087491/article/details/131555435

在C++中，字面量（Literal）是表示固定值的语法元素。它们是程序中的常量值，直接出现在代码中，不需要进行计算或求值。C++支持多种类型的字面量，包括整数、浮点数、字符、字符串和布尔值。

下面是几种常见的C++字面量类型：
- 整数字面量（Integer Literals）：用于表示整数值。可以使用十进制、八进制、十六进制或二进制表示法。例如：42, 0xFF, 0755, 0b1010；
- 浮点数字面量（Floating-point Literals）：用于表示浮点数值。可以使用十进制或科学计数法表示法。例如：3.14, 2.0e-5；
- 字符字面量（Character Literals）：用于表示单个字符值。使用单引号括起来。例如：A, x, \n。
- 字符串字面量（String Literals）：用于表示字符串值。使用双引号括起来。例如：Hello, World!, OpenAI, 42；
- 布尔字面量（Boolean Literals）：用于表示布尔值，即true或false；
- 空指针字面量（Null Pointer Literals）：用于表示空指针值。使用关键字nullptr表示。
这些字面量可以直接在代码中使用，并具有与其类型相对应的值和语义。它们提供了一种直观和方便的方式来表示常量值，并在编程中广泛使用。

## 3、C++关键字 constexpr 详解
https://www.cnblogs.com/yuwanxian/p/16314066.html

constexpr 是 C++ 11 标准中新添加的关键字，有的同学经常会把 const 和 constexpr 搞混，不知道什么时候用 const，什么时候用 constexp，下面一次性讲清楚。

在C++ 11 之前，const 关键字在实际使用中经常会表现出两种不同的语义：“只读” 和 “常量”，导致代码中有的地方语义不清，进一步导致编译时莫名报错。因此 C++ 11 新增关键字 constexpr，用来表示 “常量” 或 常量表达式，而 const 则仅仅表示 “只读”。目的是将运算尽量放在编译阶段，而不是运行阶段，另外，constexpr 还可以修饰函数、结构体。

## 4、语法糖
语法糖（Syntactic sugar），也译为糖衣语法，是由英国计算机科学家彼得·约翰·兰达（Peter J. Landin）发明的一个术语，指计算机语言中添加的某种语法，这种语法对语言的功能并没有影响，但是更方便程序员使用。通常来说使用语法糖能够增加程序的可读性，从而减少程序代码出错的机会。

举个例子：在 C 语言里用 a[i] 表示 *(a+i)，用 a[i][j] 表示 *(*(a+i)+j)，由此可见语法糖不是“现代语言”独有，这种写法简洁明了，易于理解。

需要注意的是，并非所有语法糖都是正面的。有些观点认为，语法糖可能会阻碍程序员深入理解语言的本质和工作原理。例如，Alan Perlis是一位著名的计算机科学家，他曾对语法糖持批评态度。然而，大多数情况下，语法糖被认为是积极的，它们提高了编程的效率和质量，降低了编程的复杂性和出错的可能性。

总结来说，语法糖是计算机语言中添加的一种语法形式，旨在提供更直观、更容易理解的编程体验，同时也有助于提升编程效率和代码的可读性。

## 5、function、bind和lambda表达式
其实funtion、bind和lambda表达式其实就是c++的闭包（closure）。

### 5-1、什么是闭包
简单来说，闭包就是一个带状态的可执行体。它可以捕获函数需要的变量（值捕获或者引用捕获），然后在合适的时间来执行函数。通俗一点来说，一个函数，加上一些变量的组合，就是闭包。最能表示闭包含义的结构就是仿函数了，也就是重载了operator()的类。比如下面的代码，类MyClosure，值捕获了一个Object，然后引用捕获了string（两个的区别就是是否发生拷贝），然后重载了operator()，让这个类可以像一个函数一样调用，就是我们常说的仿函数，这个就是一个非常完整的闭包的例子。
D:\Github\Storage\c++\study\advanced\factor_example3.cpp

在c++中，闭包（closure）的具体实现就是std::bind和lambda表达式，而function就是用来储存生成的闭包。

### 5-2、占位符
std::placeholders::_1是C++中用于绑定函数参数的占位符。它通常与std::bind一起使用，用于指定函数参数的位置。

当你使用std::bind来绑定一个函数时，你可以使用std::placeholders::_1、std::placeholders::_2等来表示函数的第一个参数、第二个参数，依此类推。这样可以在绑定函数时指定哪些参数是需要在调用时再传入的，从而创建一个新的可调用对象。

举个例子，假设有一个函数add接受两个参数并返回它们的和：
```
int add(int a, int b) {
    return a + b;
}
```

你可以使用std::bind来创建一个新的函数对象，只传入一个参数，然后在调用时再传入第二个参数：
```
auto addFunc = std::bind(add, std::placeholders::_1, 5);
int result = addFunc(10); // 相当于调用 add(10, 5)，结果为 15
```
在这个例子中，std::placeholders::_1表示在调用addFunc时传入的第一个参数，而5则是在绑定时就确定的第二个参数。

[C++11有了lambda后bind还有多大意义？](https://www.zhihu.com/question/38097768)

## 6、仿函数
demo: D:\Github\Storage\c++\study\advanced\factor_example.cpp
仿函数(functor)，就是使一个类的使用看上去像一个函数。其实现就是类中实现一个operator()，这个类就有了类似函数的行为，就是一个仿函数类了。

在C++里，我们通过在一个类中重载括号运算符的方法使用一个函数对象而不是一个普通函数。

## 7、其他
- 可以使用0b或者0B开头直接定义二进制变量。
- c++11中constexpr修饰函数（其实就是修饰函数返回值），除了可以包含 using 指令、typedef 语句以及 static_assert 断言外，只能包含一条 return 返回语句（c++14中，对constexpr的限制放宽了，允许使用循环、if、switch等等语句，但是主旨还是一样的，需要在编译期间就可以计算出全部内容，限制放宽之后，这个关键字便可以更灵活的使用了）
- 

demo：