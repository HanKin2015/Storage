# sysmacros.h头文件

## 1、简介
sysmacros.h是一个C语言头文件，它包含了一些与系统宏相关的定义。这个头文件通常在Unix和Linux系统中使用。

以下是一些可能在sysmacros.h头文件中定义的宏：
- major(dev_t dev)：返回设备号dev的主设备号。
- minor(dev_t dev)：返回设备号dev的次设备号。
- mkdev(int major, int minor)：根据给定的主设备号和次设备号创建一个设备号。
- MAJOR(dev_t dev)：返回设备号dev的主设备号，与major()宏相同。
- MINOR(dev_t dev)：返回设备号dev的次设备号，与minor()宏相同。
- makedev(int major, int minor)：根据给定的主设备号和次设备号创建一个设备号，与mkdev()宏相同。
这些宏通常用于处理设备号，例如在设备驱动程序中使用。请注意，具体的宏定义可能因操作系统和编译器而异，因此在具体的系统上查看相关文档或头文件可能更准确。

## 2、实战
D:\Github\Storage\c++\standard_library\file\sysmacros\sysmacros_example.c
```
[root@ubuntu0006:/media/vdb/x86] #./a.out
设备号: 64784
主设备号: 253
次设备号: 16
[root@ubuntu0006:/media/vdb/x86] #stat Makefile
  文件：'Makefile'
  大小：357             块：8          IO 块：4096   普通文件
设备：fd10h/64784d      Inode：917511      硬链接：1
权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)
最近访问：2023-10-19 15:21:48.352000000 +0800
最近更改：2023-10-19 15:21:44.384000000 +0800
最近改动：2023-10-19 15:21:44.384000000 +0800
创建时间：-
```

## 3、文件的设备号、主设备号和次设备号
文件的设备号是一个用于唯一标识文件所在设备的整数值。在Unix和Linux系统中，每个设备（如硬盘、光驱、串口等）都有一个唯一的设备号。

主设备号是设备号的一部分，用于标识设备的类型。它表示设备所属的设备驱动程序。不同类型的设备通常由不同的设备驱动程序处理，而主设备号用于区分它们。

次设备号是设备号的另一部分，用于标识同一类型设备中的具体设备。对于同一类型的设备，可能会有多个实例，每个实例都有一个唯一的次设备号。

通过使用major()和minor()宏，可以从设备号中提取出主设备号和次设备号。这些值对于设备驱动程序和系统管理非常重要，因为它们可以用来确定要与哪个设备进行交互。

需要注意的是，设备号、主设备号和次设备号是针对Unix和Linux系统的概念，在其他操作系统中可能有不同的实现和命名方式。

## 4、c语言中struct stat介绍
在C语言中，struct stat是一个结构体类型，用于存储文件或文件系统对象的状态信息。它通常与<sys/stat.h>头文件一起使用。

struct stat结构体包含了以下成员：
- st_dev：表示文件所在的设备的ID。
- st_ino：表示文件的inode节点号。
- st_mode：表示文件的类型和访问权限。可以使用位掩码操作来提取文件类型和权限信息。
- st_nlink：表示文件的硬链接数。
- st_uid：表示文件所有者的用户ID。
- st_gid：表示文件所有者的组ID。
- st_rdev：如果文件是特殊设备文件，则表示设备的ID。
- st_size：表示文件的大小（以字节为单位）。
- st_blksize：表示文件系统的I/O缓冲区大小。
- st_blocks：表示文件所占用的磁盘块数。
- st_atime：表示文件的最后访问时间。
- st_mtime：表示文件的最后修改时间。
- st_ctime：表示文件的最后状态更改时间。
通过调用stat()或fstat()函数，可以将文件的状态信息填充到struct stat结构体中。这些函数接受文件路径或文件描述符作为参数，并返回一个整数值，表示操作的成功与否。成功时，struct stat结构体中的成员将被填充。
