## 1、exit 函数
exit 是标准 C 库函数，用于正常终止一个进程。它执行以下操作：
- 调用 atexit 注册的函数：exit 会调用所有通过 atexit 注册的函数。这些函数通常用于执行一些清理操作，例如关闭文件、释放内存等。
- 刷新缓冲区：exit 会刷新所有打开的文件流缓冲区。这意味着所有缓冲区中的数据会被写入到相应的文件中。
- 关闭文件描述符：exit 会关闭所有打开的文件描述符。
- 执行内核清理操作：最后，exit 会通知内核进程已经终止，并执行必要的清理操作。

## 2、_exit 函数
_exit 是系统调用，用于立即终止一个进程。它执行以下操作：
- 不调用 atexit 注册的函数：_exit 不会调用通过 atexit 注册的函数。
- 不刷新缓冲区：_exit 不会刷新文件流缓冲区。这意味着缓冲区中的数据不会被写入到文件中。
- 关闭文件描述符：_exit 会立即关闭所有打开的文件描述符。
- 执行内核清理操作：_exit 会通知内核进程已经终止，并执行必要的清理操作。

## 3、何时使用 exit 和 _exit
- exit：通常在程序的正常终止过程中使用 exit，因为它会确保所有的清理操作都被执行，包括调用 atexit 注册的函数和刷新缓冲区。
- _exit：在某些情况下，例如在子进程中使用 fork 或 vfork 创建进程后，子进程可能需要立即终止而不执行任何清理操作。这时使用 _exit 更为合适，因为它不会影响父进程的状态。

## 4、为什么使用 _exit(1) 而不是 _exit(-1)
在 Unix 和 Linux 系统中，进程的退出状态是一个 8 位的无符号整数（通常是 unsigned char 类型），范围是 0 到 255。这个退出状态由父进程通过 wait 或 waitpid 系统调用来获取。

退出状态的约定
- 0：通常表示成功。
- 1-255：表示不同类型的错误或异常。

在 Unix 和 Linux 编程中，使用 1 表示一般错误是一个常见的约定。其他特定的错误码可以使用不同的值（例如，2 表示命令行参数错误，127 表示命令未找到等）。

## 5、wait 函数
wait 和 waitpid 都是用于等待子进程结束的系统调用，但它们有一些重要的区别。

原型：
```
pid_t wait(int *status);
```

功能：
- wait 函数会阻塞调用进程，直到其任意一个子进程结束。
- 如果有多个子进程，wait 会等待其中任何一个结束，并返回该子进程的 PID。
- status 参数用于存储子进程的退出状态。如果不关心退出状态，可以传递 NULL。

使用场景：
适用于简单的场景，即只需要等待任意一个子进程结束，不关心具体是哪个子进程。

## 6、waitpid 函数

```
pid_t waitpid(pid_t pid, int *status, int options);
```

功能：
- waitpid 提供了更灵活的等待子进程的方式。
- pid 参数指定要等待的子进程的 PID：
    - pid > 0：等待指定 PID 的子进程。
    - pid == 0：等待与调用进程在同一个进程组中的任意子进程。
    - pid < -1：等待进程组 ID 为 |pid| 的任意子进程。
    - pid == -1：等待任意子进程（等同于 wait）。
- status 参数用于存储子进程的退出状态。如果不关心退出状态，可以传递 NULL。
- options 参数提供额外的选项：
    - WNOHANG：如果没有子进程退出，立即返回，不阻塞。
    - WUNTRACED：如果子进程已停止且其状态未报告，则返回其状态。
    - WCONTINUED：如果子进程已恢复继续运行，则返回其状态（需要支持 WCONTINUED 的系统）。

使用场景：
适用于需要更精细控制的场景，例如等待特定的子进程或非阻塞等待。

## 7、vfork
- vfork 可以提高性能，因为它不复制父进程的地址空间。
- 在使用 vfork 时，子进程应立即调用 exec 或 _exit，并且不要修改父进程的地址空间。






